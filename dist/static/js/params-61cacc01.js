import{d as e,r as a,l,R as t,m as i,v as n,c as o,w as r,s,T as d,V as c,n as u,a as p,h as m,E as g}from"./index-73e8d8c6.js";import{g as f,u as h,d as b}from"./configure-5d4590c4.js";import{P as y}from"./index-4ffd8671.js";const _=p("查询"),v=p("编辑"),P=p("删除"),z=e({name:"ConfigureParams"}),C=Object.assign(z,{setup(e){const p=a({loading:!0,search:"",count:0,list:[],currentPage:1,pageSize:15}),z=()=>{p.loading=!0,f({page:p.currentPage,limit:p.pageSize,search:p.search}).then((e=>{p.count=e.count,p.list=e.data,p.loading=!1})).catch((()=>{p.loading=!1}))};return z(),(e,a)=>{const f=l("el-input"),C=l("el-form-item"),k=l("el-button"),w=l("el-form"),x=l("el-table-column"),V=l("el-popconfirm"),j=l("el-table"),S=t("loading");return i(),n("div",null,[o(w,{inline:!0},{default:r((()=>[o(C,{label:"键"},{default:r((()=>[o(f,{modelValue:p.search,"onUpdate:modelValue":a[0]||(a[0]=e=>p.search=e),placeholder:"支持模糊查询",clearable:"",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),o(C,null,{default:r((()=>[o(k,{type:"primary",icon:s(d),onClick:z},{default:r((()=>[_])),_:1},8,["icon"])])),_:1})])),_:1}),c((i(),u(j,{data:p.list,border:"",style:{width:"100%"}},{default:r((()=>[o(x,{prop:"id",label:"ID"}),o(x,{prop:"key",label:"键"}),o(x,{prop:"value",label:"值"}),o(x,{prop:"remarks",label:"备注"}),o(x,{label:"操作",fixed:"right",width:"140"},{default:r((({row:e})=>[o(k,{type:"primary",size:"small",onClick:a=>(e=>{m.prompt("","修改值",{inputValue:e.value}).then((({value:a})=>{h({id:e.id,value:a}).then((()=>{g({message:"修改成功",type:"success"}),z()})).catch((()=>{}))})).catch((()=>{}))})(e)},{default:r((()=>[v])),_:2},1032,["onClick"]),o(V,{title:"确定删除吗?",onConfirm:a=>{return l=e.id,p.loading=!0,void b({id:l}).then((()=>{})).catch((()=>{})).finally((()=>{z()}));var l}},{reference:r((()=>[o(k,{type:"danger",size:"small"},{default:r((()=>[P])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[S,p.loading]]),o(y,{page:p.currentPage,"onUpdate:page":a[1]||(a[1]=e=>p.currentPage=e),limit:p.pageSize,"onUpdate:limit":a[2]||(a[2]=e=>p.pageSize=e),total:p.count,onPagination:z},null,8,["page","limit","total"])])}}});export{C as default};
